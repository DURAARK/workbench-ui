{{duraark-preingest-steps session=session activeStep="file"}}

<div class="l-page-with-header-and-workflow-steps">

	<div class="c-workflow-page">
		{{#workflow-step-header onNext="next" disableBack=true}}
			<header><i class="fa fa-folder-o"></i>&nbsp; 1 | FILES</header>
		{{/workflow-step-header}}

		<div class="l-files">

			<div class="l-file-list">
				<h2 style="margin: 1em;"><i class="fa fa-folder-o"></i>&nbsp; 1 | Master Files:</h2>
				<hr>

				{{#if files.length}}

					{{#duraark-sidebar}}
						{{#file-list files=files as |file|}}
							{{file-item item=file select="toggleSelection" details="showDetails"}}
						{{/file-list}}
					{{/duraark-sidebar}}
				{{else}}
					<h1>No files added yet.</h1>
				{{/if}}
			</div>

			{{#if showSidebar}}
				{{#duraark-sidebar}}
					<div class="l-file-details">

						{{#if app.showLoadingSpinner}}
							{{loading-spinner-center}}
						{{else}}

							{{#unless fileInfo}}
								{{#duraark-tool title="Upload Master Files" hideClose="true" hideFullscreen="true" }}
									<div class="c-file-upload">
										{{x-droplet onFilesUploaded="addFiles"}}
									</div>
								{{/duraark-tool}}
						{{else}}
							{{#duraark-tool title="File Details" close="closeToolUI" fullscreen="maximizeToolUI" }}
								<div class="l-file-details-titel">
									<h3 class="title">{{fileInfoShortName}}</h3>
								</div>
							{{/duraark-tool}}
							{{#if errors}}
								{{#each error in errors}}
									<div>Type: {{error.type}}</div>
									<div>Message: {{error.msg}}</div>
								{{/each}}
							{{else}}
								{{#if fileInfoIsE57}}
									<!-- {{e57m-viewer file=fileInfo}} -->
									{{duraark-pointcloud-viewer file=fileInfo}}
								{{/if}}

								{{#if fileInfoIsIFC}}
									<!-- {{ifcm-viewer file=fileInfo}} -->
									{{duraark-ifc-viewer file=fileInfo}}
								{{/if}}
							{{/if}}
							{{/unless}}
						{{/if}}
					</div>
				{{/duraark-sidebar}}
			{{/if}}
		</div>

	</div>
</div>
